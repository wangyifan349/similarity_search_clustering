# 相似度搜索与聚类库使用指南

## 简介

本库提供高效、易用的高维向量相似度搜索与聚类功能。包括余弦相似度搜索、欧几里得距离搜索和 KMeans 聚类等。

## 下载与安装

### 克隆仓库

```bash
git clone https://github.com/wangyifan349/similarity_search_clustering.git
```

### 安装依赖

```bash
cd similarity_search_clustering
pip install -r requirements.txt
```

## 调用方法
### 添加向量到索引中

```python
import numpy as np
from similarity_search import addVectors

vectors = np.random.rand(100, 128).astype('float32')
index = addVectors(vectors.tolist())
```
### 余弦相似度搜索

```python
import numpy as np
from similarity_search import searchCosineSimilarity
queryVector = np.random.rand(128).astype('float32')
indices, similarities = searchCosineSimilarity(index, queryVector, k=10)
print("余弦相似度搜索结果：", indices)
print("相似度：", similarities)
```

### 欧几里得距离搜索

```python
import numpy as np
from similarity_search import searchEuclideanDistance
queryVector = np.random.rand(128).astype('float32')
indices, distances = searchEuclideanDistance(index, queryVector, k=10)
print("欧几里得距离搜索结果：", indices)
print("距离：", distances)
```

### KMeans 聚类

```python
import numpy as np
from similarity_search import kmeansClustering
vectors = np.random.rand(100, 128).astype('float32')
labels = kmeansClustering(vectors, 10)
print("KMeans 聚类结果：", labels)
```

## 示例代码

```python
import numpy as np
from similarity_search import searchCosineSimilarity, addVectors, searchEuclideanDistance, kmeansClustering

# 生成随机向量
np.random.seed(0)
vectors = np.random.rand(100, 128).astype('float32')
# 添加向量到索引中
index = addVectors(vectors.tolist())

# 查询向量
queryVector = np.random.rand(128).astype('float32')

# 余弦相似度搜索
indices, similarities = searchCosineSimilarity(index, queryVector, k=10)
print("余弦相似度搜索结果：", indices)
print("相似度：", similarities)

# 欧几里得距离搜索
indices, distances = searchEuclideanDistance(index, queryVector, k=10)
print("欧几里得距离搜索结果：", indices)
print("距离：", distances)

# KMeans 聚类
labels = kmeansClustering(vectors, 10)
print("KMeans 聚类结果：", labels)
```

# 更高级的用法

```
import numpy as np
from sentence_transformers import SentenceTransformer
from similarity_search import searchCosineSimilarity, addVectors
# 加载句子编码器
model = SentenceTransformer('paraphrase-MiniLM-L6-v2')
# 生成句子列表
sentences = [
    "This is a test sentence.",
    "This sentence is for testing.",
    "The testing sentence is this one.",
    "Another sentence for testing.",
    "Testing sentence with different words."
]
# 编码句子
sentence_embeddings = model.encode(sentences)
# 添加向量到索引中
index = addVectors(sentence_embeddings.tolist())
# 查询句子
query_sentence = "This is a test sentence."
query_embedding = model.encode([query_sentence])[0]
# 余弦相似度搜索
indices, similarities = searchCosineSimilarity(index, query_embedding, k=5)
print("相似句子索引：", indices)
print("相似度：", similarities)

# 打印相似句子
for i in indices:
    print(sentences[i])
```

